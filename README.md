# Spack #
spack 是一个打包工具，可以对react项目进行打包,同构。
spack 文件级缓存，速度极快。比如一个项目有100个文件。第一次编译spack会缓存每个文件的编译结果。第二次编译的时候，只做增量编译。如果你只修改的了一个文件，就只会对这一个文件做编译，所以速度极快。

## 应用场景 ##
一、专题页面，纯静态。
特点
1. 一般一个专题为一个页面。
2. 可以是纯静态。没有动态数据，或少量动态数据。

虽然每个页面是独立的，但是页面的头尾，统计 等模块是可以复用的。可以把专题页面都集中在一个专题项目里，方便页面间资源共享，模块共用。spack每次只对有变化的页面进行编译，生成html静态页面

二、webview 页面
特点
1. 完全静态内容。
2. 完全动态内容或大部分动态内容
3. 小部分动态内容。

对于动态内容过多的情况，可以通过 url传到页面中。如果不方便做，可以用spack在服务端用 node 生成页面，客户端进行事件挂载，也就是同构。

三、单面应用
特点。只要打开应用，就不会再刷新页面。
如果完全客户端处理。 缺点：首屏加载时间过长。
解决办法
1. 动态加载资源 ，用动态import语句。
2. 服务端生成首页，优化首屏时间

理论上来说，如果1，2都做到了，大部分项目都可以做成单面应用。但是页面很长的不适合。因为长页面有滚动位置，页面本身的加载优化等问题，和动态加载放一起会导致过于复杂，而且和直接刷新页面相比，也没有了优势。单页面之所有有优势，是建立在所有页面都有大部分共同点这一个前提之上的。长页面之间相同的部分相比页面整体会显得很少，所以单而没什么优势了。
 


## 运行流程 ##

按顺序执行执
开发环境
1. 执行spack dev 开发环境编译命令
2. 读项目文件
3. 删除没有变化的文件
4. buble
5. 处理html文件或tpl文件

收到请求后
如果是html文件，会运行前面1-5，对有变化的文件进行编译，response html
如果404 ，通过routerConfig找到对应的模板，controler,渲染，response


## TODOS ##
目前spack能用，并运行的很好，但因为精力有限，很多功能都是手动的或没有完成。
1. 自动导入node模块文件
2. 产品发布优化：文件合并，压缩。
3. 动态import 语句，import 楼号分隔的模块（impot a,{b} from 'a.js'
4. 热加载 
5. 页面切换效果。
6. 补全测试

